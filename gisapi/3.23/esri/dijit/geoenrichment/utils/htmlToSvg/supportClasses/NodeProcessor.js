// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.23/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/htmlToSvg/supportClasses/NodeProcessor","dojo/Deferred dojo/when dojo/promise/all ./drawing/SVGDrawer ./DomProcessor ./Clipper ./VisualsCollector".split(" "),function(y,l,D,h,z,q,A){return{processNode:function(e,f){function r(b,c,e,t,k){function g(a){a&&(Array.isArray(a)?a.forEach(function(a){g(a)}):(m.push({text:a,stackIndex:++k}),d++))}var d=0;if("#comment"===b.nodeName)return d;var a=A.getNodeVisuals(b,t);if(!a)return d;a.style.isRelAbs&&(k=B+=1E5);a.parentVs=
t;if("svg"===b.nodeName)return g(h.drawSVG(b,a,c)),d;if("IMG"===b.nodeName)return g(h.drawImage(b,a,c)),d;if(a.style.background.image&&"none"!==a.style.background.image){var u;a.style.borderRadius&&(u=q.addClipping(a,f.definitions));g(h.drawBackgroundImage(a,u||c))}g(h.drawRect(a,c));g(h.drawBorder(a,c));z.replaceTextWithSpans(b);var v;if(b.childNodes.length){var n=function(){function d(){"#text"===e.nodeName?(g(h.drawText(b,a,c,{encodeText:f.encodeText})),n()):l(r(e,c,p,a,k),function(a){k+=a;n()})}
var e=b.childNodes[C++];e?++w>(f.iterationsPerScript||500)?(w=0,setTimeout(d,30)):d():x.resolve()},x=new y;v=x.promise;var p;"hidden"===a.style.overflow&&(p=f.clipFunc&&f.clipFunc(b),c=(e||f.useClipping||p)&&q.addClipping(a,f.definitions,c));var C=0;n()}return l(v,function(){return d})}var w=0,m=[],B=0;return l(r(e,null,null,null,0),function(){m.sort(function(b,c){return b.stackIndex-c.stackIndex});return m})}}});